(this["webpackJsonptrading-strategy-tester"]=this["webpackJsonptrading-strategy-tester"]||[]).push([[4],{294:function(e,n,t){"use strict";t.r(n),t.d(n,"searchSymbol",(function(){return l})),t.d(n,"getCandles",(function(){return b}));var r=t(34),s=t.n(r),a=t(71),o=t(339),i=t.n(o),c=t(77),u=t.n(c),d=t(64),p=t.n(d),f=u()("xapi"),m="wss://ws.xtb.com/demo",v=function(e,n){return e.filter((function(e){return e.symbol.includes(n)||e.name.includes(n)}))},l=function(){var e=Object(a.a)(s.a.mark((function e(n){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new i.a(m),e.abrupt("return",new Promise((function(e,r){t.addEventListener("open",(function(){var e={command:"login",arguments:{userId:Number("10856086"),password:"xoh17020"}};t.send(JSON.stringify(e))})),t.addEventListener("message",function(){var r=Object(a.a)(s.a.mark((function r(a){var o,i;return s.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:void 0!==(o=JSON.parse(a.data)).streamSessionId?(i={command:"getAllSymbols"},t.send(JSON.stringify(i))):(t.close(),e(v(o.returnData.map((function(e){var n={symbol:"",name:"",type:"",currency:""};return n.symbol=e.symbol,n.name=e.description,n.type=e.categoryName,n.currency=e.currency,n})),n)));case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()),t.addEventListener("close",(function(){})),t.addEventListener("ping",(function(){f("Webocket ping received! ["+m+"]")})),t.addEventListener("error",(function(e){}))})));case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),w=function(e,n){return e.map((function(e){var t={date:0,open:0,high:0,low:0,close:0,volume:0};return t.date=p()(e.ctm).toDate(),t.open=e.open/n,t.high=t.open+e.high/n,t.low=t.open+e.low/n,t.close=t.open+e.close/n,t.volume=e.vol,t}))},g=new Map;g.set(1,1),g.set(5,1),g.set(15,1),g.set(30,7),g.set(60,7),g.set(240,13),g.set(1440,13),g.set(10080,60),g.set(43200,60);var b=function(){var e=Object(a.a)(s.a.mark((function e(n,t){var r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new i.a(m),e.abrupt("return",new Promise((function(e,o){r.addEventListener("open",(function(){var e={command:"login",arguments:{userId:Number("10856086"),password:"xoh17020"}};r.send(JSON.stringify(e))})),r.addEventListener("message",function(){var o=Object(a.a)(s.a.mark((function a(o){var i,c,u;return s.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:void 0!==(i=JSON.parse(o.data)).streamSessionId?(c={command:"getChartLastRequest",arguments:{info:{period:Number(t),start:p()().subtract(g.get(Number(t)),"month").valueOf(),symbol:n}}},u=JSON.stringify(c),f("Strin",u),r.send(u)):(r.close(),e(w(i.returnData.rateInfos,Math.pow(10,i.returnData.digits))));case 2:case"end":return s.stop()}}),a)})));return function(e){return o.apply(this,arguments)}}()),r.addEventListener("close",(function(){})),r.addEventListener("ping",(function(){f("Webocket ping received! ["+m+"]")})),r.addEventListener("error",(function(e){}))})));case 2:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()},339:function(e,n,t){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}}}]);
//# sourceMappingURL=4.b002c14e.chunk.js.map