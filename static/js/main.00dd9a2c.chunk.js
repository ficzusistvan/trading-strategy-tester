(this["webpackJsonptrading-strategy-tester"]=this["webpackJsonptrading-strategy-tester"]||[]).push([[4],{11:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return s})),n.d(t,"h",(function(){return c})),n.d(t,"i",(function(){return i})),n.d(t,"l",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"k",(function(){return m})),n.d(t,"a",(function(){return p})),n.d(t,"g",(function(){return f})),n.d(t,"m",(function(){return h}));var r="LOGIN",a="REGISTER",o="LOGOUT",s="SET_DATA_SOURCE",c="SET_LOCAL_CSV",i="SET_MY_REST_API_URL",l="SET_SYMBOL",u="SET_PERIOD",d="SET_IS_DEFAULT",m="SET_STRATEGY",p="ADD_CANDLES",f="SET_IS_TEST_FINISHED",h="SET_TRADES"},117:function(e,t,n){var r={"./alphavantage/api":[301,0,7,11],"./finnhub/api":[302,0,8],"./local-csv/api":[303,10],"./my-rest-api/api":[304,0,12],"./xAPI/api":[305,9]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return Promise.all(t.slice(1).map(n.e)).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=117,e.exports=a},143:function(e){e.exports=JSON.parse('{"common":{"hello_world":"Welcome to Trading Strategy Tester","list":"list","listv":"list","create":"create","edit":"edit","delete":"delete","save":"save","cancel":"cancel","loading":"loading","admin":"admin","error_saving":"error saving","ok":"ok","nr":"nr.","from":"from","remove":"remove","download":"download pdf","generate":"generate pdf","select_data_source":"select data source","select_symbol":"select symbol","select_period":"select period","select_strategy":"select strategy"},"orderbooks":{"orderbooks":"orderbooks"},"xapi":{"symbols":{"symbols":"XAPI symbols"}},"alphavantage":{"symbols":{"symbols":"Alphavantage symbols"}},"symbols":{"symbols":"symbols","symbol":"symbol","currency":"currency","category_name":"category name","description":"description","bid":"bid","ask":"ask","high":"high","low":"low","name":"name","type":"type","region":"region","market_open":"market open","market_close":"market close","timezone":"timezone"}}')},151:function(e,t,n){e.exports=n(299)},186:function(e,t,n){var r={"./test01":[105,1],"./test01.ts":[105,1],"./test02":[106,2],"./test02.ts":[106,2],"./test03_Zoli":[107,3],"./test03_Zoli.ts":[107,3]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=186,e.exports=a},274:function(e,t,n){},275:function(e,t,n){},276:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){},295:function(e,t,n){var r={"./test01.ts":[105,1],"./test02.ts":[106,2],"./test03_Zoli.ts":[107,3]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=295,e.exports=a},299:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(73),s=n(43),c=n(19),i=n.n(c),l=n(18),u=n(11),d=n(13),m=n(14),p=n(16),f=n(15),h=n(17),y=n(308),b=n(145),g=function(e){function t(){var e;return Object(d.a)(this,t),(e=Object(p.a)(this,Object(f.a)(t).call(this))).onDrop=function(t){t.forEach((function(t){var n=new FileReader;n.onabort=function(){return console.log("file reading was aborted")},n.onerror=function(){return console.log("file reading has failed")},n.onload=function(){e.props.onSetCSV(n.result)},n.readAsText(t)})),e.setState({files:t})},e.state={files:[]},e}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.state.files.map((function(e){return a.a.createElement("li",{key:e.name},e.name," - ",e.size," bytes")}));return a.a.createElement(b.a,{onDrop:this.onDrop},(function(t){var n=t.getRootProps,r=t.getInputProps;return a.a.createElement("section",{className:"container"},a.a.createElement("div",n({className:"dropzone"}),a.a.createElement("input",r()),a.a.createElement("p",null,"Drag 'n' drop some files here, or click to select files")),a.a.createElement("aside",null,a.a.createElement("h4",null,"Files"),a.a.createElement("ul",null,e)))}))}}]),t}(r.Component),E=Object(l.connect)(null,(function(e){return{onSetCSV:function(t){e(function(e){return{type:u.h,csv:e}}(t))}}}))(g),v=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onHandleUrlChanged",value:function(e){this.props.onSetMyRestApiUrl(e.target.value)}},{key:"render",value:function(){return a.a.createElement(y.a,{type:"input",name:"my-rest-api-url",id:"my-rest-api-url",value:this.props.myRestApiUrl,onChange:this.onHandleUrlChanged.bind(this)})}}]),t}(r.Component),O=Object(l.connect)((function(e){return{myRestApiUrl:e.testerConfigs.myRestApiUrl}}),(function(e){return{onSetMyRestApiUrl:function(t){e(function(e){return{type:u.i,url:e}}(t))}}}))(v),S=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={dataSources:["alphavantage","xAPI","finnhub","local-csv","my-rest-api"]},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){""===this.props.dataSource&&this.props.onSetDataSource(this.state.dataSources[0])}},{key:"onHandleDataSourceChanged",value:function(e){this.props.onSetDataSource(e.target.value)}},{key:"render",value:function(){for(var e=this.state.dataSources,t=[],n=0;n<e.length;n++)t.push(a.a.createElement("option",{value:e[n],key:n},e[n]));return a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,"Select data source"),a.a.createElement(y.a,{type:"select",name:"data-source",id:"dataSourceSelect",value:this.props.dataSource,onChange:this.onHandleDataSourceChanged.bind(this)},t),"local-csv"===this.props.dataSource&&a.a.createElement(E,null),"my-rest-api"===this.props.dataSource&&a.a.createElement(O,null))}}]),t}(r.Component),k=i()(S),j=Object(l.connect)((function(e){return{dataSource:e.testerConfigs.dataSource}}),(function(e){return{onSetDataSource:function(t){e(function(e){return{type:u.e,dataSource:e}}(t))}}}))(k),w=n(28),C=n.n(w),A=n(46),D=n(144),x=(n(116),n(309)),T=n(310),P=n(311),_=n(312),N=n(313),H=[{str:"M1",val:1},{str:"M5",val:5},{str:"M15",val:15},{str:"M30",val:30},{str:"H1",val:60},{str:"H4",val:240},{str:"D1",val:1440},{str:"W1",val:10080},{str:"MN1",val:43200}],I=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={keyword:"",symbols:[],loading:!0,selectedRowIndex:null},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onHandleKeywordChange",value:function(e){this.setState({keyword:e.target.value})}},{key:"onHandleSearchClick",value:function(){var e=Object(A.a)(C.a.mark((function e(t){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(117)("./"+this.props.dataSource+"/api");case 2:return r=e.sent,e.next=5,r.searchSymbol(this.state.keyword);case 5:a=e.sent,console.log(a),this.setState({symbols:a,loading:!1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onHandleSymbolClick",value:function(e,t){this.setState({selectedRowIndex:t}),this.props.onSetSymbol(e)}},{key:"onHandlePeriodChange",value:function(e){this.props.onSetPeriod(e.target.value)}},{key:"onHandleDefaultChange",value:function(e){this.props.onSetIsDefault(e.target.checked)}},{key:"onHandleAddClick",value:function(){var e=Object(A.a)(C.a.mark((function e(t){var r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(117)("./"+this.props.dataSource+"/api");case 2:return r=e.sent,e.next=5,r.getCandles(this.props.symbol,this.props.period);case 5:a=e.sent,this.props.onAddCandles(this.props.symbol,this.props.period,this.props.isDefault,a),this.props.onSetIsDefault(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){for(var e=this,t=this.state,n=t.symbols,r=t.loading,o=[],s=0;s<H.length;s++)o.push(a.a.createElement("option",{value:H[s].val,key:s},H[s].str));var c=void 0===this.props.symbolsAndPeriods.find((function(e){return!0===e.isDefault}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("h4",null,"Add symbol and period"),a.a.createElement(x.a,null,a.a.createElement(T.a,null,a.a.createElement("h5",null,"Search symbol"))),a.a.createElement(x.a,null,a.a.createElement(T.a,{sm:"6"},a.a.createElement(y.a,{type:"text",name:"keyword",id:"keyword",value:this.state.keyword,onChange:this.onHandleKeywordChange.bind(this)})),a.a.createElement(T.a,{sm:"6"},a.a.createElement(P.a,{block:!0,onClick:this.onHandleSearchClick.bind(this)},"Search symbol"))),a.a.createElement(x.a,null,a.a.createElement(T.a,null,a.a.createElement("h5",null,"Select symbol"),a.a.createElement(D.a,{getTdProps:function(t,n,r,a){return{onClick:function(t,r){console.log("It was in this row:",n),e.onHandleSymbolClick(n.original.symbol,n.index)},style:{background:void 0!==n&&n.index===e.state.selectedRowIndex?"#00afec":"white",color:void 0!==n&&n.index===e.state.selectedRowIndex?"white":"black"}}},data:n,columns:[{id:"symbol",Header:this.props.p.tc("symbols.symbol"),accessor:function(e){return e.symbol}},{id:"name",Header:this.props.p.tc("symbols.name"),accessor:function(e){return e.name}},{id:"type",Header:this.props.p.tc("symbols.type"),accessor:function(e){return e.type}},{id:"currency",Header:this.props.p.tc("symbols.currency"),accessor:function(e){return e.currency}}],defaultPageSize:10,className:"-striped -highlight",loading:r,filterable:!0}))),a.a.createElement(x.a,null,a.a.createElement(T.a,null,a.a.createElement("h5",null,"Select period"),a.a.createElement(y.a,{type:"select",name:"period",id:"periodSelect",value:this.props.period,onChange:this.onHandlePeriodChange.bind(this)},o))),a.a.createElement(x.a,null,a.a.createElement(T.a,null,a.a.createElement("h5",null,"Select if default"),a.a.createElement(_.a,{check:!0},a.a.createElement(N.a,{check:!0},a.a.createElement(y.a,{type:"checkbox",onChange:this.onHandleDefaultChange.bind(this),disabled:!c,checked:this.props.isDefault})," ","Check if default")))),a.a.createElement(x.a,{className:"my-3 justify-content-md-center"},a.a.createElement(T.a,{sm:"6"},a.a.createElement(P.a,{block:!0,onClick:this.onHandleAddClick.bind(this)},"Add symbol and period"))))}}]),t}(r.Component),F=i()(I),R=Object(l.connect)((function(e){return{dataSource:e.testerConfigs.dataSource,symbol:e.testerConfigs.symbol,period:e.testerConfigs.period,isDefault:e.testerConfigs.isDefault,symbolsAndPeriods:e.testerConfigs.symbolsAndPeriods,strategy:e.testerConfigs.strategy}}),(function(e){return{onSetSymbol:function(t){e(function(e){return{type:u.l,symbol:e}}(t))},onSetPeriod:function(t){e(function(e){return{type:u.j,period:e}}(t))},onSetIsDefault:function(t){e(function(e){return{type:u.f,isDefault:e}}(t))},onAddCandles:function(t,n,r,a){e(function(e,t,n,r){return{type:u.a,symbol:e,period:t,isDefault:n,candles:r}}(t,n,r,a))}}}))(F),M=function(e){function t(e){var n;return Object(d.a)(this,t),(n=Object(p.a)(this,Object(f.a)(t).call(this,e))).state={strategies:["test01","test02","test03_Zoli"],description:""},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"updateDescription",value:function(){var e=Object(A.a)(C.a.mark((function e(t){var r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(186)("./"+t);case 2:r=e.sent,this.setState({description:r.getDescription()});case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){""===this.props.strategy?(this.props.onSetStrategy(this.state.strategies[0]),this.updateDescription(this.state.strategies[0])):this.updateDescription(this.props.strategy)}},{key:"onHandleStrategyChanged",value:function(e){this.props.onSetStrategy(e.target.value),this.updateDescription(e.target.value)}},{key:"render",value:function(){for(var e=this.state.strategies,t=[],n=0;n<e.length;n++)t.push(a.a.createElement("option",{value:e[n],key:n},e[n]));return a.a.createElement(a.a.Fragment,null,a.a.createElement(x.a,null,a.a.createElement(T.a,null,a.a.createElement("h4",null,"Select strategy"),a.a.createElement(y.a,{type:"select",name:"strategy",id:"strategySelect",value:this.props.strategy,onChange:this.onHandleStrategyChanged.bind(this)},t))),a.a.createElement(x.a,null,a.a.createElement(T.a,null,a.a.createElement("h5",null,"Strategy description:"),a.a.createElement("p",null,this.state.description))))}}]),t}(r.Component),L=i()(M),U=Object(l.connect)((function(e){return{strategy:e.testerConfigs.strategy}}),(function(e){return{onSetStrategy:function(t){e(function(e){return{type:u.k,strategy:e}}(t))}}}))(L),z=n(62),Y=n.n(z),V=n(82),X=n(30),B=n(61),Z=n(44),G=n(45),W=n(33),J=n(138),K=n(76),q=n(60),Q=n(139),$=n(2),ee=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=Object(q.ema)().id(0).options({windowSize:26}).merge((function(e,t){e.ema26=t})).accessor((function(e){return e.ema26})),t=Object(q.ema)().id(1).options({windowSize:12}).merge((function(e,t){e.ema12=t})).accessor((function(e){return e.ema12})),n=Object(q.sma)().id(3).options({windowSize:50,sourcePath:"volume"}).merge((function(e,t){e.smaVolume50=t})).accessor((function(e){return e.smaVolume50})),r=Object(q.rsi)().options({windowSize:14}).merge((function(e,t){e.rsi=t})).accessor((function(e){return e.rsi})),o=Object(q.atr)().options({windowSize:14}).merge((function(e,t){e.atr14=t})).accessor((function(e){return e.atr14})),s=this.props,c=s.type,i=s.data,l=s.width,u=s.ratio,d=e(t(n(r(o(i))))),m=J.discontinuousTimeScaleProvider.inputDateAccessor((function(e){return e.date}))(d),p=m.data,f=m.xScale,h=m.xAccessor,y=m.displayXAccessor,b=[h(Object($.last)(p)),h(p[Math.max(0,p.length-150)])];return a.a.createElement(B.b,{height:730,width:l,ratio:u,margin:{left:70,right:70,top:20,bottom:30},type:c,seriesName:"ToTheTop",data:p,xScale:f,xAccessor:h,displayXAccessor:y,xExtents:b},a.a.createElement(B.a,{id:1,height:270,yExtents:[function(e){return[e.high,e.low]},e.accessor(),t.accessor()],padding:{top:10,bottom:20}},a.a.createElement(G.XAxis,{axisAt:"bottom",orient:"bottom",showTicks:!1,outerTickSize:0}),a.a.createElement(G.YAxis,{axisAt:"right",orient:"right",ticks:5}),a.a.createElement(W.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(V.b)(".2f")}),a.a.createElement(Z.CandlestickSeries,null),a.a.createElement(Z.LineSeries,{yAccessor:e.accessor(),stroke:e.stroke()}),a.a.createElement(Z.LineSeries,{yAccessor:t.accessor(),stroke:t.stroke()}),a.a.createElement(W.CurrentCoordinate,{yAccessor:e.accessor(),fill:e.stroke()}),a.a.createElement(W.CurrentCoordinate,{yAccessor:t.accessor(),fill:t.stroke()}),a.a.createElement(W.EdgeIndicator,{itemType:"last",orient:"right",edgeAt:"right",yAccessor:function(e){return e.close},fill:function(e){return e.close>e.open?"#6BA583":"#FF0000"}}),a.a.createElement(K.OHLCTooltip,{xDisplayFormat:Object(X.b)("%Y-%m-%d %H:%M"),origin:[-40,0]}),a.a.createElement(K.MovingAverageTooltip,{onClick:function(e){return console.log(e)},origin:[-38,15],options:[{yAccessor:e.accessor(),type:"EMA",stroke:e.stroke(),windowSize:e.options().windowSize},{yAccessor:t.accessor(),type:"EMA",stroke:t.stroke(),windowSize:t.options().windowSize}]})),a.a.createElement(B.a,{id:2,height:150,yExtents:[function(e){return e.volume},n.accessor()],origin:function(e,t){return console.log("chart id 2:",e,t),[0,t-400]}},a.a.createElement(G.YAxis,{axisAt:"left",orient:"left",ticks:5,tickFormat:Object(V.b)(".2s")}),a.a.createElement(W.MouseCoordinateY,{at:"left",orient:"left",displayFormat:Object(V.b)(".4s")}),a.a.createElement(Z.BarSeries,{yAccessor:function(e){return e.volume},fill:function(e){return e.close>e.open?"#6BA583":"#FF0000"}}),a.a.createElement(Z.AreaSeries,{yAccessor:n.accessor(),stroke:n.stroke(),fill:n.fill()})),a.a.createElement(B.a,{id:3,yExtents:[0,100],height:125,origin:function(e,t){return console.log("chart id 3:",e,t),[0,t-250]}},a.a.createElement(G.XAxis,{axisAt:"bottom",orient:"bottom",showTicks:!1,outerTickSize:0}),a.a.createElement(G.YAxis,{axisAt:"right",orient:"right",tickValues:[30,50,70]}),a.a.createElement(W.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(V.b)(".2f")}),a.a.createElement(Z.RSISeries,{yAccessor:function(e){return e.rsi}}),a.a.createElement(K.RSITooltip,{origin:[-38,15],yAccessor:function(e){return e.rsi},options:r.options()})),a.a.createElement(B.a,{id:8,yExtents:o.accessor(),height:125,origin:function(e,t){return[0,t-125]},padding:{top:10,bottom:10}},a.a.createElement(G.XAxis,{axisAt:"bottom",orient:"bottom"}),a.a.createElement(G.YAxis,{axisAt:"right",orient:"right",ticks:2}),a.a.createElement(W.MouseCoordinateX,{at:"bottom",orient:"bottom",displayFormat:Object(X.b)("%Y-%m-%d %H:%M")}),a.a.createElement(W.MouseCoordinateY,{at:"right",orient:"right",displayFormat:Object(V.b)(".2f")}),a.a.createElement(Z.LineSeries,{yAccessor:o.accessor(),stroke:o.stroke()}),a.a.createElement(K.SingleValueTooltip,{yAccessor:o.accessor(),yLabel:"ATR (".concat(o.options().windowSize,")"),yDisplayFormat:Object(V.b)(".2f"),origin:[-40,15]})),a.a.createElement(W.CrossHairCursor,null))}}]),t}(a.a.Component);ee.defaultProps={type:"svg"};var te,ne,re,ae,oe=ee=Object(Q.fitWidth)(ee),se=(n(274),function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props.candles.map((function(e){var t=e.candles.map((function(e){var t={};return t.date=Y()(e.date).toDate(),t.open=e.open,t.high=e.high,t.low=e.low,t.close=e.close,t.volume=e.volume,t}));return t.symbol=e.symbol,t.period=e.period,t})).map((function(e){return a.a.createElement(x.a,{className:"mb-5",key:e.symbol+"_"+e.period},a.a.createElement(T.a,null,a.a.createElement("h4",null,"Chart of symbol ",e.symbol," with ",e.period," period"),a.a.createElement(oe,{type:"hybrid",data:e})))}));return a.a.createElement(a.a.Fragment,null,e)}}]),t}(r.Component)),ce=i()(se),ie=Object(l.connect)((function(e){return{candles:e.testerConfigs.symbolsAndPeriods}}))(ce),le=n(319),ue=n(315),de=n(316),me=n(317),pe=n(318),fe=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.startPrice,n=e.endPrice,r=e.side,o=e.startDate,s=e.endDate,c="success",i=0;return"BUY"===r?i=n-t:"SELL"===r&&(i=t-n),i<0&&(c="danger"),a.a.createElement(ue.a,{color:c},a.a.createElement(de.a,null,r),a.a.createElement(me.a,null,Y()(o).format("MMM D ddd HH:mm"),": ",a.a.createElement(pe.a,{pill:!0},t),a.a.createElement("br",null),Y()(s).format("MMM D ddd HH:mm"),": ",a.a.createElement(pe.a,{pill:!0},n),a.a.createElement("br",null),"Profit: ",a.a.createElement(pe.a,{pill:!0},i.toFixed(2))))}}]),t}(r.Component),he=i()(fe),ye=(n(275),function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this.props,t=e.profits,n=e.losses;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"Nr. of profitable trades: ",a.a.createElement(pe.a,{pill:!0},t)),a.a.createElement("p",null,"Nr. of loosing trades: ",a.a.createElement(pe.a,{pill:!0},n)))}}]),t}(r.Component)),be=i()(ye),ge=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=0,t=[],n=0,r=0;return this.props.trades.forEach((function(o,s,c){if("NONE"!==o.side){var i=s<c.length-1?c[s+1]:{date:"",price:o.price};t.push(a.a.createElement(he,{startPrice:o.price,endPrice:i.price,side:o.side,startDate:o.date,endDate:i.date,key:s})),"BUY"===o.side&&(e+=i.price-o.price,i.price-o.price>0?n++:r++),"SELL"===o.side&&(e+=o.price-i.price,o.price-i.price>0?n++:r++)}})),a.a.createElement(x.a,null,a.a.createElement(T.a,null,a.a.createElement("h4",null,"Profit: ",a.a.createElement("span",{className:"text-danger font-weight-bold"},e.toFixed(2))),a.a.createElement(be,{profits:n,losses:r}),a.a.createElement("h4",null,"Strategy results:"),a.a.createElement(le.a,null,t)))}}]),t}(r.Component),Ee=i()(ge),ve=Object(l.connect)((function(e){return{trades:e.testerResults.trades}}))(Ee),Oe=(n(276),i()((function(){return a.a.createElement(x.a,{className:"main"},a.a.createElement(T.a,null,a.a.createElement(s.c,null,a.a.createElement(s.a,{exact:!0,path:"/data-source",component:j}),a.a.createElement(s.a,{exact:!0,path:"/symbol-period",component:R}),a.a.createElement(s.a,{exact:!0,path:"/strategy",component:U}),a.a.createElement(s.a,{exact:!0,path:"/charts",component:ie}),a.a.createElement(s.a,{exact:!0,path:"/results",component:ve}))))}))),Se=n(320),ke=(n(278),[{str:"M1",val:1},{str:"M5",val:5},{str:"M15",val:15},{str:"M30",val:30},{str:"H1",val:60},{str:"H4",val:240},{str:"D1",val:1440},{str:"W1",val:10080},{str:"MN1",val:43200}]),je=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this,t=ke.filter((function(t){return t.val===Number(e.props.period)}));return a.a.createElement(x.a,null,a.a.createElement(T.a,null,a.a.createElement("p",null,"Symbol: ",this.props.symbol," Period: ",t[0].str," ",this.props.isDefault?"default":"","; ",this.props.nrOfCandles," candles")))}}]),t}(r.Component),we=i()(je),Ce=function(e){var t=[];return e.symbolsAndPeriods.forEach((function(e,n,r){t.push(a.a.createElement(we,{key:e.symbol+e.period,symbol:e.symbol,period:e.period,isDefault:e.isDefault,nrOfCandles:e.candles.length}))})),a.a.createElement(x.a,{className:"right-sidebar"},a.a.createElement(T.a,null,a.a.createElement(x.a,{className:"my-5"},a.a.createElement(T.a,{className:"border-bottom border-top"},a.a.createElement("p",{className:"font-weight-bold"},"Selected data source:"),a.a.createElement("p",null,e.dataSource))),a.a.createElement(x.a,{className:"my-5"},a.a.createElement(T.a,{className:"border-bottom border-top"},a.a.createElement("p",{className:"font-weight-bold"},"Added symbols and periods:"),t)),a.a.createElement(x.a,{className:"my-5"},a.a.createElement(T.a,{className:"border-bottom border-top"},a.a.createElement("p",{className:"font-weight-bold"},"Selected strategy:"),a.a.createElement("p",null,e.strategy)))))},Ae=Object(l.connect)((function(e){return{dataSource:e.testerConfigs.dataSource,symbolsAndPeriods:e.testerConfigs.symbolsAndPeriods,strategy:e.testerConfigs.strategy}}))(Ce),De=function(e){return{type:u.g,isTestFinished:e}},xe=(n(279),n(37)),Te=n(141),Pe=n.n(Te),_e=n(79),Ne=n.n(_e),He=Ne()("tester"),Ie=!1,Fe=[],Re=function(){var e=Object(A.a)(C.a.mark((function e(t,r){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ie=!1,Fe=[],ne=r,re=r.filter((function(e){return!0===e.isDefault}))[0],e.next=6,n(295)("./"+t+".ts");case 6:te=e.sent,Ue.emit(Ye);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Me=function(e){if(He("Handling candle idx ["+e+"]"),e<re.candles.length){if(Ie){var t=te.exit(re.candles,e,ae,ne);!0===t.result&&(He("Exited order %O",t.trade),Fe.push(t.trade),Ie=!1)}else{var n=te.enter(re.candles,e,ne);!0===n.result&&(He("Entered order %O",n.trade),Fe.push(n.trade),ae=n.trade,Ie=!0)}Ue.emit(Ve,{idx:e})}else Ue.emit(Xe,{trades:Fe})},Le=n(58),Ue=new Pe.a,ze=Ne()("event-handler"),Ye="TESTER_INITIALIZED",Ve="CANDLE_HANDLED",Xe="FINISHED";Ue.on("START",(function(e){console.log("Starting tester"),Re(e.strategy,e.allCandles)})),Ue.on(Ye,(function(){console.log("Tester initialized; handling first candle"),Me(0)})),Ue.on(Ve,(function(e){ze("Handling candle",e.idx+1),Me(++e.idx)})),Ue.on(Xe,(function(e){var t;console.log("Test finished!"),Le.a.dispatch(De(!0)),Le.a.dispatch((t=e.trades,{type:u.m,trades:t}))}));var Be=function(e){function t(){return Object(d.a)(this,t),Object(p.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"onRunTestClick",value:function(e){this.props.onSetIsTestFinished(!1),Ue.emit("START",{strategy:this.props.strategy,allCandles:this.props.symbolsAndPeriods})}},{key:"render",value:function(){return this.props.isTestFinished?a.a.createElement(x.a,{className:"left-sidebar"},a.a.createElement(T.a,null,a.a.createElement(x.a,null,a.a.createElement(T.a,{className:"text-center"},a.a.createElement("h3",null,"Trading Strategy Tester"))),a.a.createElement(x.a,{className:"mt-5"},a.a.createElement(T.a,null,a.a.createElement(P.a,{block:!0,color:"success",tag:xe.b,to:"data-source"},"Select data source"))),a.a.createElement(x.a,{className:"mt-5"},a.a.createElement(T.a,null,a.a.createElement(P.a,{block:!0,color:"success",tag:xe.b,to:"symbol-period",disabled:null===this.props.dataSource},"Add symbol & period"))),a.a.createElement(x.a,{className:"mt-5"},a.a.createElement(T.a,null,a.a.createElement(P.a,{block:!0,color:"success",tag:xe.b,to:"strategy"},"Select strategy"))),a.a.createElement(x.a,{className:"mt-5"},a.a.createElement(T.a,null,a.a.createElement(P.a,{block:!0,color:"primary",onClick:this.onRunTestClick.bind(this),disabled:null===this.props.strategy||0===this.props.symbolsAndPeriods.length},"Run test"))),a.a.createElement(x.a,{className:"mt-5"},a.a.createElement(T.a,null,a.a.createElement(P.a,{block:!0,color:"warning",tag:xe.b,to:"charts",disabled:0===this.props.symbolsAndPeriods.length},"View charts"))),a.a.createElement(x.a,{className:"mt-5"},a.a.createElement(T.a,null,a.a.createElement(P.a,{block:!0,color:"warning",tag:xe.b,to:"results",disabled:!1===this.props.isTestFinished},"View results"))))):a.a.createElement("img",{alt:"",src:"loading.gif"})}}]),t}(a.a.Component),Ze=i()(Be),Ge=Object(l.connect)((function(e){return{isTestFinished:e.testerResults.isTestFinished,dataSource:e.testerConfigs.dataSource,symbolsAndPeriods:e.testerConfigs.symbolsAndPeriods,strategy:e.testerConfigs.strategy}}),(function(e){return{onSetIsTestFinished:function(t){e(De(t))}}}))(Ze),We=function(){return a.a.createElement("div",null,a.a.createElement(Se.a,{fluid:!0},a.a.createElement(x.a,null,a.a.createElement(T.a,{sm:"2"},a.a.createElement(Ge,null)),a.a.createElement(T.a,{sm:"7"},a.a.createElement(Oe,null)),a.a.createElement(T.a,{sm:"3"},a.a.createElement(Ae,null)))))},Je=(n(298),n(92)),Ke=n(143);Le.a.dispatch(Object(Je.setLanguage)("en",Ke)),o.render(r.createElement(l.Provider,{store:Le.a},r.createElement(xe.a,null,r.createElement(We,null))),document.getElementById("root"))},58:function(e,t,n){"use strict";var r=n(48),a=n(11);var o=n(146),s=n(94);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{dataSource:"",csv:null,myRestApiUrl:"http://fieaam.go.ro:8081/candles/DE30/5",symbol:null,period:5,isDefault:!0,symbolsAndPeriods:[],strategy:""},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.e:return e.dataSource===t.dataSource?e:i({},e,{dataSource:t.dataSource,csv:null,symbol:null,period:5,symbolsAndPeriods:[]});case a.h:return i({},e,{csv:t.csv});case a.i:return i({},e,{myRestApiUrl:t.url});case a.l:return i({},e,{symbol:t.symbol});case a.j:return i({},e,{period:t.period});case a.f:return i({},e,{isDefault:t.isDefault});case a.a:return i({},e,{symbolsAndPeriods:[].concat(Object(o.a)(e.symbolsAndPeriods),[{symbol:t.symbol,period:t.period,isDefault:t.isDefault,candles:t.candles}])});case a.k:return i({},e,{strategy:t.strategy});default:return e}};function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(s.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isTestFinished:!0,trades:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.g:return d({},e,{isTestFinished:t.isTestFinished});case a.m:return d({},e,{trades:t.trades});default:return e}},p=n(142),f=Object(r.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isLoggedIn:!1,user:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.b:case a.d:return{isLoggedIn:t.isLoggedIn,user:t.user};case a.c:return{isLoggedIn:t.isLoggedIn,user:null};default:return e}},testerConfigs:l,testerResults:m,polyglot:p.polyglotReducer});t.a=Object(r.createStore)(f,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())}},[[151,5,6]]]);
//# sourceMappingURL=main.00dd9a2c.chunk.js.map