(this["webpackJsonptrading-strategy-tester"]=this["webpackJsonptrading-strategy-tester"]||[]).push([[11],{301:function(e,t,a){"use strict";a.r(t),a.d(t,"searchSymbol",(function(){return y})),a.d(t,"getCandles",(function(){return d}));var n=a(353),r=a(28),s=a.n(r),c=a(46),o=a(323),u=a.n(o),i=a(79),p=a.n(i),l=a(349),h=a.n(l),f=p()("avapi"),m="HHDB0QLZL4LHI4XR",y=function(){var e=Object(c.a)(s.a.mark((function e(t){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.a.get("https://www.alphavantage.co/query?function=SYMBOL_SEARCH&keywords="+t+"&apikey="+m);case 2:return a=e.sent,f("searchSymbol",a.data),e.abrupt("return",a.data.bestMatches.map((function(e){var t={symbol:"",name:"",type:"",currency:""};return t.symbol=e["1. symbol"],t.name=e["2. name"],t.type=e["3. type"],t.currency=e["8. currency"],t})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=function(e,t){for(var a=[],r=0,s=Object.entries(e);r<s.length;r++){var c=s[r],o=Object(n.a)(c,2),u=o[0],i=o[1];console.log("alphavantage candle timestamp:",u);var p={date:0,open:0,high:0,low:0,close:0,volume:0},l=h()(u).tz(t).utcOffset(),f=h()(u).tz("Europe/Bucharest").utcOffset();p.date=h()(u).subtract(l,"minutes").add(f,"minutes").toDate(),p.open=i["1. open"],p.high=i["2. high"],p.low=i["3. low"],p.close=i["4. close"],p.volume=i["5. volume"],a.unshift(p)}return a},d=function(){var e=Object(c.a)(s.a.mark((function e(t,a){var r,c,o,i,p,l,h,y,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f("getTimeSeriesIntraday",r=a<61?"https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol="+t+"&interval="+a+"min&apikey="+m:"https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+t+"&apikey="+m),e.next=4,u.a.get(r);case 4:c=e.sent,f("getTimeSeriesIntraday",c.data),o=c.data["Meta Data"]["6. Time Zone"],console.log("Using timezone",o),i=0,p=Object.entries(c.data);case 9:if(!(i<p.length)){e.next=19;break}if(l=p[i],h=Object(n.a)(l,2),y=h[0],d=h[1],!y.includes("Time Series")){e.next=16;break}return e.abrupt("return",b(d,o));case 16:i++,e.next=9;break;case 19:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=11.81312911.chunk.js.map